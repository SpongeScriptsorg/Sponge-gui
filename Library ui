-- Sponge Library UI v4.0 - OFFICIAL RELEASE
-- Black & Yellow theme | Tabs | Anti-kick | Server hopper | Save settings

local Sponge = {}
Sponge.__index = Sponge
Sponge.Version = "4.0.0"

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer

-- Black & Yellow Theme
local Theme = {
    bg = Color3.fromRGB(10, 10, 10),        -- Pure black
    surface = Color3.fromRGB(18, 18, 18),    -- Dark gray
    surface2 = Color3.fromRGB(25, 25, 25),   -- Slightly lighter
    accent = Color3.fromRGB(255, 215, 0),    -- Bright yellow
    accent2 = Color3.fromRGB(255, 200, 50),   -- Soft yellow
    text = Color3.fromRGB(255, 255, 255),
    textMuted = Color3.fromRGB(180, 180, 180),
    border = Color3.fromRGB(255, 215, 0)     -- Yellow border
}

-- Save/Load functions
local function SaveSettings(data, name)
    local success, err = pcall(function()
        writefile("Sponge_" .. name .. ".json", HttpService:JSONEncode(data))
    end)
    return success
end

local function LoadSettings(name)
    local success, data = pcall(function()
        return HttpService:JSONDecode(readfile("Sponge_" .. name .. ".json"))
    end)
    if success then return data end
    return nil
end

-- Anti-Kick System
local AntiKick = {
    Active = false,
    Connection = nil,
    
    Start = function(self)
        if self.Active then return end
        self.Active = true
        
        -- Anti-kick (20 min AFK avoidance)
        self.Connection = game:GetService("RunService").Heartbeat:Connect(function()
            if self.Active then
                -- Simulate small movements every 20 minutes
                if tick() % 1200 < 0.1 then  -- 1200 seconds = 20 minutes
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("Humanoid") then
                        char.Humanoid:Move(Vector3.new(0.1, 0, 0), true)
                        wait(0.1)
                        char.Humanoid:Move(Vector3.new(0, 0, 0), true)
                    end
                end
            end
        end)
        
        -- Anti-idle disconnect
        LocalPlayer.Idled:Connect(function()
            if self.Active then
                local vu = game:GetService("VirtualUser")
                vu:CaptureController()
                vu:ClickButton2(Vector2.new())
            end
        end)
    end,
    
    Stop = function(self)
        self.Active = false
        if self.Connection then
            self.Connection:Disconnect()
            self.Connection = nil
        end
    end
}

-- Server Hopper
local function HopServer()
    local http = game:GetService("HttpService")
    local success, result = pcall(function()
        return http:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?limit=100"))
    end)
    
    if success and result and result.data then
        local servers = {}
        for _, server in ipairs(result.data) do
            if server.playing < server.maxPlayers and server.id ~= game.JobId then
                table.insert(servers, server.id)
            end
        end
        
        if #servers > 0 then
            local randomServer = servers[math.random(1, #servers)]
            TeleportService:TeleportToPlaceInstance(game.PlaceId, randomServer, LocalPlayer)
            return true
        end
    end
    return false
end

-- Utility functions
local function new(class, props)
    local obj = Instance.new(class)
    for k, v in pairs(props) do obj[k] = v end
    return obj
end

local function tween(obj, props, dur)
    TweenService:Create(obj, TweenInfo.new(dur or 0.2), props):Play()
end

-- ===========================================
-- MAIN WINDOW
-- ===========================================
function Sponge:Window(opts)
    opts = opts or {}
    
    -- Main GUI
    local gui = new("ScreenGui", {
        Name = "SpongeLibrary",
        Parent = game:GetCoreGui(),
        DisplayOrder = 999,
        IgnoreGuiInset = true
    })
    
    -- Main Frame
    local frame = new("Frame", {
        Parent = gui,
        BackgroundColor3 = Theme.bg,
        Size = UDim2.new(0, opts.Width or 580, 0, opts.Height or 400),
        Position = UDim2.new(0.5, -(opts.Width or 580)/2, 0.5, -(opts.Height or 400)/2),
        Active = true,
        ClipsDescendants = true
    })
    
    new("UICorner", {Parent = frame, CornerRadius = UDim.new(0, 16)})
    new("UIStroke", {Parent = frame, Color = Theme.accent, Thickness = 2, Transparency = 0.3})
    
    -- ===========================================
    -- TOP BAR WITH RETURN UI BUTTON
    -- ===========================================
    local topBar = new("Frame", {
        Parent = frame,
        BackgroundColor3 = Theme.surface,
        Size = UDim2.new(1, 0, 0, 50),
        BorderSizePixel = 0
    })
    
    new("UICorner", {Parent = topBar, CornerRadius = UDim.new(0, 16)})
    
    -- Yellow line
    new("Frame", {
        Parent = topBar,
        BackgroundColor3 = Theme.accent,
        Size = UDim2.new(1, -20, 0, 2),
        Position = UDim2.new(0, 10, 1, -2),
        BorderSizePixel = 0
    })
    
    -- "return ui" button (center top)
    local returnBtn = new("TextButton", {
        Parent = topBar,
        BackgroundColor3 = Theme.surface2,
        Size = UDim2.new(0, 100, 0, 30),
        Position = UDim2.new(0.5, -50, 0.5, -15),
        Text = "â†© return ui",
        TextColor3 = Theme.accent,
        Font = Enum.Font.GothamBold,
        TextSize = 14,
        AutoButtonColor = false
    })
    
    new("UICorner", {Parent = returnBtn, CornerRadius = UDim.new(0, 8)})
    new("UIStroke", {Parent = returnBtn, Color = Theme.accent, Thickness = 1})
    
    -- Hover effect
    returnBtn.MouseEnter:Connect(function()
        tween(returnBtn, {BackgroundColor3 = Theme.accent}, 0.15)
        tween(returnBtn:FindFirstChildOfClass("TextLabel") or returnBtn, {TextColor3 = Theme.bg}, 0.15)
    end)
    
    returnBtn.MouseLeave:Connect(function()
        tween(returnBtn, {BackgroundColor3 = Theme.surface2}, 0.15)
        tween(returnBtn:FindFirstChildOfClass("TextLabel") or returnBtn, {TextColor3 = Theme.accent}, 0.15)
    end)
    
    returnBtn.MouseButton1Click:Connect(function()
        -- Return to main UI function (you can define what this does)
        print("ðŸ”™ Return to main UI")
        -- Could show/hide something or go to main tab
    end)
    
    -- ===========================================
    -- CLOSE BUTTON (Just X, no icon)
    -- ===========================================
    local closeBtn = new("TextButton", {
        Parent = topBar,
        BackgroundColor3 = Theme.surface2,
        Size = UDim2.new(0, 36, 0, 36),
        Position = UDim2.new(1, -46, 0.5, -18),
        Text = "âœ•",
        TextColor3 = Theme.accent,
        Font = Enum.Font.GothamBold,
        TextSize = 20,
        AutoButtonColor = false
    })
    
    new("UICorner", {Parent = closeBtn, CornerRadius = UDim.new(0, 10)})
    
    closeBtn.MouseEnter:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Color3.fromRGB(255, 80, 80), TextColor3 = Color3.new(1,1,1)}, 0.15)
    end)
    
    closeBtn.MouseLeave:Connect(function()
        tween(closeBtn, {BackgroundColor3 = Theme.surface2, TextColor3 = Theme.accent}, 0.15)
    end)
    
    closeBtn.MouseButton1Click:Connect(function()
        tween(frame, {BackgroundTransparency = 1}, 0.2)
        wait(0.2)
        gui:Destroy()
    end)
    
    -- ===========================================
    -- DRAGGABLE (Mobile + Desktop)
    -- ===========================================
    do
        local dragging = false
        local dragStart = nil
        local startPos = nil
        
        topBar.Active = true
        topBar.Selectable = true
        
        topBar.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Touch or 
               input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                dragStart = input.Position
                startPos = frame.Position
                topBar.BackgroundColor3 = Theme.surface2
            end
        end)
        
        topBar.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Touch or 
               input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
                topBar.BackgroundColor3 = Theme.surface
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and (input.UserInputType == Enum.UserInputType.Touch or 
               input.UserInputType == Enum.UserInputType.MouseMovement) then
                local delta = input.Position - dragStart
                frame.Position = UDim2.new(
                    startPos.X.Scale,
                    startPos.X.Offset + delta.X,
                    startPos.Y.Scale,
                    startPos.Y.Offset + delta.Y
                )
            end
        end)
    end
    
    -- ===========================================
    -- TAB SYSTEM
    -- ===========================================
    local tabContainer = new("Frame", {
        Parent = frame,
        BackgroundColor3 = Theme.surface,
        Size = UDim2.new(1, 0, 0, 45),
        Position = UDim2.new(0, 0, 0, 50),
        BorderSizePixel = 0
    })
    
    new("UICorner", {Parent = tabContainer, CornerRadius = UDim.new(0, 12)})
    
    local tabButtons = new("Frame", {
        Parent = tabContainer,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 1, 0),
        Position = UDim2.new(0, 10, 0, 0)
    })
    
    local tabLayout = new("UIListLayout", {
        Parent = tabButtons,
        FillDirection = Enum.FillDirection.Horizontal,
        HorizontalAlignment = Enum.HorizontalAlignment.Left,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 8)
    })
    
    -- Pages container
    local pagesContainer = new("Frame", {
        Parent = frame,
        BackgroundColor3 = Theme.surface,
        Size = UDim2.new(1, -20, 1, -115),
        Position = UDim2.new(0, 10, 0, 100),
        BorderSizePixel = 0
    })
    
    new("UICorner", {Parent = pagesContainer, CornerRadius = UDim.new(0, 12)})
    new("UIStroke", {Parent = pagesContainer, Color = Theme.accent, Thickness = 1, Transparency = 0.5})
    
    -- Window object
    local win = {
        gui = gui,
        frame = frame,
        pagesContainer = pagesContainer,
        pages = {},
        tabs = {},
        currentTab = nil,
        settings = {},
        
        -- Add Tab
        Tab = function(self, name)
            -- Tab button
            local tabBtn = new("TextButton", {
                Parent = tabButtons,
                BackgroundColor3 = Theme.surface2,
                Size = UDim2.new(0, 100, 0, 35),
                Position = UDim2.new(0, (#self.tabs * 108), 0, 5),
                Text = name,
                TextColor3 = Theme.textMuted,
                Font = Enum.Font.GothamBold,
                TextSize = 14,
                AutoButtonColor = false,
                LayoutOrder = #self.tabs + 1
            })
            
            new("UICorner", {Parent = tabBtn, CornerRadius = UDim.new(0, 8)})
            new("UIStroke", {Parent = tabBtn, Color = Theme.accent, Thickness = 1, Transparency = 0.7})
            
            -- Page for this tab
            local page = new("ScrollingFrame", {
                Parent = pagesContainer,
                BackgroundTransparency = 1,
                Size = UDim2.new(1, -20, 1, -20),
                Position = UDim2.new(0, 10, 0, 10),
                CanvasSize = UDim2.new(0, 0, 0, 0),
                ScrollBarThickness = 4,
                ScrollBarImageColor3 = Theme.accent,
                AutomaticCanvasSize = Enum.AutomaticSize.Y,
                Visible = (#self.tabs == 0)  -- First tab visible
            })
            
            local pageLayout = new("UIListLayout", {
                Parent = page,
                Padding = UDim.new(0, 10),
                SortOrder = Enum.SortOrder.LayoutOrder
            })
            
            -- Tab click
            tabBtn.MouseButton1Click:Connect(function()
                -- Hide all pages
                for _, p in ipairs(self.pages) do
                    p.Visible = false
                end
                -- Show this page
                page.Visible = true
                self.currentTab = name
                
                -- Update button colors
                for _, btn in ipairs(self.tabs) do
                    tween(btn.Button, {BackgroundColor3 = Theme.surface2}, 0.15)
                    tween(btn.Button:FindFirstChildOfClass("TextLabel") or btn.Button, {TextColor3 = Theme.textMuted}, 0.15)
                end
                tween(tabBtn, {BackgroundColor3 = Theme.accent}, 0.15)
                tween(tabBtn:FindFirstChildOfClass("TextLabel") or tabBtn, {TextColor3 = Theme.bg}, 0.15)
            end)
            
            -- Store tab
            local tabObj = {
                Name = name,
                Button = tabBtn,
                Page = page,
                Layout = pageLayout,
                
                -- Add Section
                Section = function(self, title)
                    local section = new("Frame", {
                        Parent = page,
                        BackgroundColor3 = Theme.surface2,
                        Size = UDim2.new(1, 0, 0, 0),
                        AutomaticSize = Enum.AutomaticSize.Y,
                        BorderSizePixel = 0
                    })
                    
                    new("UICorner", {Parent = section, CornerRadius = UDim.new(0, 10)})
                    
                    -- Yellow header line
                    if title then
                        new("Frame", {
                            Parent = section,
                            BackgroundColor3 = Theme.accent,
                            Size = UDim2.new(1, -20, 0, 2),
                            Position = UDim2.new(0, 10, 0, 30),
                            BorderSizePixel = 0
                        })
                        
                        new("TextLabel", {
                            Parent = section,
                            BackgroundTransparency = 1,
                            Size = UDim2.new(1, -20, 0, 30),
                            Position = UDim2.new(0, 10, 0, 0),
                            Text = title,
                            TextColor3 = Theme.accent,
                            Font = Enum.Font.GothamBold,
                            TextSize = 16,
                            TextXAlignment = Enum.TextXAlignment.Left
                        })
                    end
                    
                    local sectionLayout = new("UIListLayout", {
                        Parent = section,
                        Padding = UDim.new(0, 6),
                        SortOrder = Enum.SortOrder.LayoutOrder
                    })
                    
                    new("UIPadding", {
                        Parent = section,
                        PaddingTop = UDim.new(0, title and 35 or 8),
                        PaddingBottom = UDim.new(0, 8),
                        PaddingLeft = UDim.new(0, 10),
                        PaddingRight = UDim.new(0, 10)
                    })
                    
                    local sec = {
                        -- Toggle
                        Toggle = function(self, opt)
                            opt = opt or {}
                            
                            local f = new("Frame", {
                                Parent = section,
                                BackgroundColor3 = Theme.surface,
                                Size = UDim2.new(1, 0, 0, 40),
                                BorderSizePixel = 0
                            })
                            
                            new("UICorner", {Parent = f, CornerRadius = UDim.new(0, 8)})
                            
                            -- Yellow accent line
                            new("Frame", {
                                Parent = f,
                                BackgroundColor3 = Theme.accent,
                                Size = UDim2.new(0, 3, 1, -10),
                                Position = UDim2.new(0, 0, 0.5, -5),
                                BorderSizePixel = 0
                            })
                            
                            new("TextLabel", {
                                Parent = f,
                                BackgroundTransparency = 1,
                                Size = UDim2.new(1, -70, 1, 0),
                                Position = UDim2.new(0, 15, 0, 0),
                                Text = opt.Title or "Toggle",
                                TextColor3 = Theme.text,
                                Font = Enum.Font.Gotham,
                                TextSize = 14,
                                TextXAlignment = Enum.TextXAlignment.Left
                            })
                            
                            if opt.Description then
                                new("TextLabel", {
                                    Parent = f,
                                    BackgroundTransparency = 1,
                                    Size = UDim2.new(1, -70, 0, 16),
                                    Position = UDim2.new(0, 15, 0, 22),
                                    Text = opt.Description,
                                    TextColor3 = Theme.textMuted,
                                    Font = Enum.Font.Gotham,
                                    TextSize = 11
                                })
                                f.Size = UDim2.new(1, 0, 0, 56)
                            end
                            
                            local btn = new("TextButton", {
                                Parent = f,
                                BackgroundColor3 = opt.Default and Theme.accent or Theme.surface,
                                Size = UDim2.new(0, 46, 0, 24),
                                Position = UDim2.new(1, -54, 0.5, -12),
                                Text = "",
                                AutoButtonColor = false
                            })
                            
                            new("UICorner", {Parent = btn, CornerRadius = UDim.new(1, 0)})
                            
                            local circle = new("Frame", {
                                Parent = btn,
                                BackgroundColor3 = Color3.new(1,1,1),
                                Size = UDim2.new(0, 18, 0, 18),
                                Position = opt.Default and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9),
                                BorderSizePixel = 0
                            })
                            
                            new("UICorner", {Parent = circle, CornerRadius = UDim.new(1, 0)})
                            
                            local state = opt.Default or false
                            local key = opt.Key or opt.Title
                            
                            -- Load saved state
                            if win.settings[key] ~= nil then
                                state = win.settings[key]
                                btn.BackgroundColor3 = state and Theme.accent or Theme.surface
                                circle.Position = state and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
                            end
                            
                            btn.MouseButton1Click:Connect(function()
                                state = not state
                                tween(btn, {BackgroundColor3 = state and Theme.accent or Theme.surface}, 0.15)
                                tween(circle, {
                                    Position = state and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 2, 0.5, -9)
                                }, 0.15)
                                
                                win.settings[key] = state
                                if opt.Callback then opt.Callback(state) end
                            end)
                            
                            return {Get = function() return state end}
                        end,
                        
                        -- Button
                        Button = function(self, opt)
                            opt = opt or {}
                            
                            local btn = new("TextButton", {
                                Parent = section,
                                BackgroundColor3 = Theme.surface,
                                Size = UDim2.new(1, 0, 0, 40),
                                Text = "",
                                AutoButtonColor = false
                            })
                            
                            new("UICorner", {Parent = btn, CornerRadius = UDim.new(0, 8)})
                            new("UIStroke", {Parent = btn, Color = Theme.accent, Thickness = 1, Transparency = 0.5})
                            
                            new("TextLabel", {
                                Parent = btn,
                                BackgroundTransparency = 1,
                                Size = UDim2.new(1, -20, 1, 0),
                                Position = UDim2.new(0, 15, 0, 0),
                                Text = opt.Title or "Button",
                                TextColor3 = Theme.accent,
                                Font = Enum.Font.GothamBold,
                                TextSize = 15,
                                TextXAlignment = Enum.TextXAlignment.Left
                            })
                            
                            if opt.Description then
                                new("TextLabel", {
                                    Parent = btn,
                                    BackgroundTransparency = 1,
                                    Size = UDim2.new(1, -20, 0, 16),
                                    Position = UDim2.new(0, 15, 0, 22),
                                    Text = opt.Description,
                                    TextColor3 = Theme.textMuted,
                                    Font = Enum.Font.Gotham,
                                    TextSize = 11
                                })
                                btn.Size = UDim2.new(1, 0, 0, 56)
                            end
                            
                            btn.MouseEnter:Connect(function()
                                tween(btn, {BackgroundColor3 = Theme.accent}, 0.15)
                                tween(btn:FindFirstChildOfClass("TextLabel"), {TextColor3 = Theme.bg}, 0.15)
                            end)
                            
                            btn.MouseLeave:Connect(function()
                                tween(btn, {BackgroundColor3 = Theme.surface}, 0.15)
                                tween(btn:FindFirstChildOfClass("TextLabel"), {TextColor3 = Theme.accent}, 0.15)
                            end)
                            
                            btn.MouseButton1Click:Connect(opt.Callback or function() end)
                            
                            return btn
                        end,
                        
                        -- Label
                        Label = function(self, opt)
                            opt = opt or {}
                            
                            return new("TextLabel", {
                                Parent = section,
                                BackgroundTransparency = 1,
                                Size = UDim2.new(1, 0, 0, opt.Height or 20),
                                Text = opt.Text or "",
                                TextColor3 = opt.Color or Theme.text,
                                Font = Enum.Font.Gotham,
                                TextSize = opt.Size or 14,
                                TextXAlignment = Enum.TextXAlignment.Left,
                                TextWrapped = true
                            })
                        end
                    }
                    
                    return sec
                end
            }
            
            table.insert(self.tabs, {Button = tabBtn, Name = name})
            table.insert(self.pages, page)
            
            return tabObj
        end,
        
        -- Select Tab
        SelectTab = function(self, name)
            for i, tab in ipairs(self.tabs) do
                if tab.Name == name then
                    tab.Button:Click()
                    break
                end
            end
        end,
        
        -- Save Settings
        SaveSettings = function(self, name)
            SaveSettings(self.settings, name or "config")
            Sponge:Notify({
                Title = "ðŸ’¾ Saved",
                Content = "Settings saved successfully!"
            })
        end,
        
        -- Load Settings
        LoadSettings = function(self, name)
            local data = LoadSettings(name or "config")
            if data then
                self.settings = data
                Sponge:Notify({
                    Title = "ðŸ“‚ Loaded",
                    Content = "Settings loaded successfully!"
                })
                return true
            end
            return false
        end
    }
    
    -- ===========================================
    -- DEFAULT INFO TAB (Made by Sponge Scripts)
    -- ===========================================
    local infoTab = win:Tab("ðŸ“Œ Info")
    local infoSection = infoTab:Section("About")
    
    infoSection:Label({
        Text = "ðŸ§½ Sponge Library UI",
        Size = 22,
        Color = Theme.accent
    })
    
    infoSection:Label({
        Text = "Version " .. Sponge.Version,
        Size = 14,
        Color = Theme.textMuted
    })
    
    infoSection:Label({Text = ""})  -- Spacer
    
    infoSection:Label({
        Text = "Made by: Sponge Scripts",
        Size = 16,
        Color = Theme.accent
    })
    
    infoSection:Label({
        Text = "Â© 2024 All rights reserved",
        Size = 12,
        Color = Theme.textMuted
    })
    
    infoSection:Label({Text = ""})  -- Spacer
    
    infoSection:Label({
        Text = "Features:",
        Size = 16,
        Color = Theme.accent
    })
    
    infoSection:Label({Text = "âœ“ Anti-Kick (20 min AFK protection)"})
    infoSection:Label({Text = "âœ“ Server Hopper"})
    infoSection:Label({Text = "âœ“ Save/Load Settings"})
    infoSection:Label({Text = "âœ“ Mobile Friendly"})
    infoSection:Label({Text = "âœ“ Black & Yellow Theme"})
    
    -- Anti-kick section
    local antiSection = infoTab:Section("Protection")
    
    antiSection:Toggle({
        Title = "Anti-Kick",
        Description = "Prevent being kicked for AFK",
        Default = true,
        Key = "AntiKick",
        Callback = function(state)
            if state then
                AntiKick:Start()
            else
                AntiKick:Stop()
            end
        end
    })
    
    antiSection:Button({
        Title = "Hop Server",
        Description = "Teleport to another server",
        Callback = function()
            Sponge:Notify({
                Title = "ðŸ”„ Hopping...",
                Content = "Looking for new server"
            })
            HopServer()
        end
    })
    
    antiSection:Button({
        Title = "Save Settings",
        Description = "Save current configuration",
        Callback = function()
            win:SaveSettings()
        end
    })
    
    antiSection:Button({
        Title = "Load Settings",
        Description = "Load saved configuration",
        Callback = function()
            win:LoadSettings()
        end
    })
    
    -- Start anti-kick by default
    AntiKick:Start()
    
    return win
end

-- ===========================================
-- NOTIFICATION SYSTEM
-- ===========================================
function Sponge:Notify(opts)
    opts = opts or {}
    
    local gui = game:GetCoreGui():FindFirstChild("SpongeNotifs")
    if not gui then
        gui = new("ScreenGui", {
            Name = "SpongeNotifs",
            Parent = game:GetCoreGui(),
            DisplayOrder = 1000,
            IgnoreGuiInset = true
        })
    end
    
    local notif = new("Frame", {
        Parent = gui,
        BackgroundColor3 = Theme.surface,
        Size = UDim2.new(0, 300, 0, 70),
        Position = UDim2.new(1, -320, 0, -90),
        BorderSizePixel = 0
    })
    
    new("UICorner", {Parent = notif, CornerRadius = UDim.new(0, 12)})
    new("UIStroke", {Parent = notif, Color = Theme.accent, Thickness = 1})
    
    -- Yellow line
    new("Frame", {
        Parent = notif,
        BackgroundColor3 = Theme.accent,
        Size = UDim2.new(0, 4, 1, -20),
        Position = UDim2.new(0, 0, 0.5, -10),
        BorderSizePixel = 0
    })
    
    new("TextLabel", {
        Parent = notif,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 0, 20),
        Position = UDim2.new(0, 15, 0, 12),
        Text = opts.Title or "Sponge Library",
        TextColor3 = Theme.accent,
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    new("TextLabel", {
        Parent = notif,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 0, 30),
        Position = UDim2.new(0, 15, 0, 32),
        Text = opts.Content or "",
        TextColor3 = Theme.text,
        Font = Enum.Font.Gotham,
        TextSize = 13,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true
    })
    
    tween(notif, {Position = UDim2.new(1, -320, 0, 20)}, 0.3)
    task.wait(opts.Duration or 3)
    tween(notif, {Position = UDim2.new(1, -320, 0, -90)}, 0.3)
    task.wait(0.3)
    notif:Destroy()
end

return Sponge
